[
  {
    "trigger": "public.update_approval_routes_updated_at",
    "table": "public.approval_routes",
    "timing": "BEFORE",
    "events": [
      "UPDATE"
    ],
    "function": "public.update_updated_at_column()",
    "purpose": "Keeps updated_at timestamps fresh on write-heavy tables."
  },
  {
    "trigger": "public.update_attachments_updated_at",
    "table": "public.attachments",
    "timing": "BEFORE",
    "events": [
      "UPDATE"
    ],
    "function": "public.update_updated_at_column()",
    "purpose": "Keeps updated_at timestamps fresh on write-heavy tables."
  },
  {
    "trigger": "public.update_contract_statuses_updated_at",
    "table": "public.contract_statuses",
    "timing": "BEFORE",
    "events": [
      "UPDATE"
    ],
    "function": "public.update_contract_statuses_updated_at()",
    "purpose": ""
  },
  {
    "trigger": "public.update_contractor_types_updated_at",
    "table": "public.contractor_types",
    "timing": "BEFORE",
    "events": [
      "UPDATE"
    ],
    "function": "public.update_updated_at_column()",
    "purpose": "Keeps updated_at timestamps fresh on write-heavy tables."
  },
  {
    "trigger": "public.update_contractors_updated_at",
    "table": "public.contractors",
    "timing": "BEFORE",
    "events": [
      "UPDATE"
    ],
    "function": "public.update_updated_at_column()",
    "purpose": "Keeps updated_at timestamps fresh on write-heavy tables."
  },
  {
    "trigger": "public.update_contracts_updated_at",
    "table": "public.contracts",
    "timing": "BEFORE",
    "events": [
      "UPDATE"
    ],
    "function": "public.update_updated_at_column()",
    "purpose": "Keeps updated_at timestamps fresh on write-heavy tables."
  },
  {
    "trigger": "public.update_departments_updated_at",
    "table": "public.departments",
    "timing": "BEFORE",
    "events": [
      "UPDATE"
    ],
    "function": "public.update_updated_at_column()",
    "purpose": "Keeps updated_at timestamps fresh on write-heavy tables."
  },
  {
    "trigger": "public.update_employees_updated_at",
    "table": "public.employees",
    "timing": "BEFORE",
    "events": [
      "UPDATE"
    ],
    "function": "public.update_updated_at_column()",
    "purpose": "Keeps updated_at timestamps fresh on write-heavy tables."
  },
  {
    "trigger": "public.update_invoice_statuses_updated_at",
    "table": "public.invoice_statuses",
    "timing": "BEFORE",
    "events": [
      "UPDATE"
    ],
    "function": "public.update_updated_at_column()",
    "purpose": "Keeps updated_at timestamps fresh on write-heavy tables."
  },
  {
    "trigger": "public.update_invoice_types_updated_at",
    "table": "public.invoice_types",
    "timing": "BEFORE",
    "events": [
      "UPDATE"
    ],
    "function": "public.update_updated_at_column()",
    "purpose": "Keeps updated_at timestamps fresh on write-heavy tables."
  },
  {
    "trigger": "public.calculate_vat_on_invoice",
    "table": "public.invoices",
    "timing": "BEFORE",
    "events": [
      "INSERT",
      "UPDATE"
    ],
    "function": "public.calculate_vat_amounts()",
    "purpose": "Recomputes VAT totals on invoice rows before they persist."
  },
  {
    "trigger": "public.update_invoices_updated_at",
    "table": "public.invoices",
    "timing": "BEFORE",
    "events": [
      "UPDATE"
    ],
    "function": "public.update_updated_at_column()",
    "purpose": "Keeps updated_at timestamps fresh on write-heavy tables."
  },
  {
    "trigger": "public.update_material_classes_updated_at",
    "table": "public.material_classes",
    "timing": "BEFORE",
    "events": [
      "UPDATE"
    ],
    "function": "public.update_updated_at()",
    "purpose": "Generic BEFORE UPDATE helper that sets NEW.updated_at to the current timestamp."
  },
  {
    "trigger": "public.update_material_request_items_count_trigger",
    "table": "public.material_request_items",
    "timing": "AFTER",
    "events": [
      "INSERT",
      "DELETE"
    ],
    "function": "public.update_material_request_items_count()",
    "purpose": "Keeps material_requests.total_items in sync with child records."
  },
  {
    "trigger": "public.update_material_requests_updated_at",
    "table": "public.material_requests",
    "timing": "BEFORE",
    "events": [
      "UPDATE"
    ],
    "function": "public.update_material_requests_updated_at()",
    "purpose": "Refreshes updated_at on material_requests before changes commit."
  },
  {
    "trigger": "public.update_payment_approvals_updated_at",
    "table": "public.payment_approvals",
    "timing": "BEFORE",
    "events": [
      "UPDATE"
    ],
    "function": "public.update_updated_at_column()",
    "purpose": "Keeps updated_at timestamps fresh on write-heavy tables."
  },
  {
    "trigger": "public.update_payment_statuses_updated_at",
    "table": "public.payment_statuses",
    "timing": "BEFORE",
    "events": [
      "UPDATE"
    ],
    "function": "public.update_updated_at_column()",
    "purpose": "Keeps updated_at timestamps fresh on write-heavy tables."
  },
  {
    "trigger": "public.update_payment_types_updated_at",
    "table": "public.payment_types",
    "timing": "BEFORE",
    "events": [
      "UPDATE"
    ],
    "function": "public.update_updated_at_column()",
    "purpose": "Keeps updated_at timestamps fresh on write-heavy tables."
  },
  {
    "trigger": "public.update_payments_updated_at",
    "table": "public.payments",
    "timing": "BEFORE",
    "events": [
      "UPDATE"
    ],
    "function": "public.update_updated_at_column()",
    "purpose": "Keeps updated_at timestamps fresh on write-heavy tables."
  },
  {
    "trigger": "public.update_positions_updated_at",
    "table": "public.positions",
    "timing": "BEFORE",
    "events": [
      "UPDATE"
    ],
    "function": "public.update_updated_at_column()",
    "purpose": "Keeps updated_at timestamps fresh on write-heavy tables."
  },
  {
    "trigger": "public.update_projects_updated_at",
    "table": "public.projects",
    "timing": "BEFORE",
    "events": [
      "UPDATE"
    ],
    "function": "public.update_updated_at_column()",
    "purpose": "Keeps updated_at timestamps fresh on write-heavy tables."
  },
  {
    "trigger": "public.update_roles_updated_at",
    "table": "public.roles",
    "timing": "BEFORE",
    "events": [
      "UPDATE"
    ],
    "function": "public.update_updated_at_column()",
    "purpose": "Keeps updated_at timestamps fresh on write-heavy tables."
  },
  {
    "trigger": "public.update_user_profiles_updated_at",
    "table": "public.user_profiles",
    "timing": "BEFORE",
    "events": [
      "UPDATE"
    ],
    "function": "public.update_updated_at_column()",
    "purpose": "Keeps updated_at timestamps fresh on write-heavy tables."
  },
  {
    "trigger": "public.update_workflow_stages_updated_at",
    "table": "public.workflow_stages",
    "timing": "BEFORE",
    "events": [
      "UPDATE"
    ],
    "function": "public.update_updated_at_column()",
    "purpose": "Keeps updated_at timestamps fresh on write-heavy tables."
  }
]
