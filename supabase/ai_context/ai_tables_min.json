[
  {
    "table": "public.approval_routes",
    "summary": "Approval routes configured per invoice type.",
    "columns": [
      {
        "name": "id",
        "type": "integer",
        "nullable": false,
        "pk": true,
        "description": "Primary key of the approval route."
      },
      {
        "name": "invoice_type_id",
        "type": "integer",
        "nullable": false,
        "fk": "public.invoice_types.id",
        "description": "Invoice type (public.invoice_types.id) this route applies to."
      },
      {
        "name": "name",
        "type": "varchar(255)",
        "nullable": false,
        "description": "Display name of the approval route."
      },
      {
        "name": "is_active",
        "type": "boolean",
        "nullable": true,
        "description": "TRUE when the route can be used for new payments."
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the route record was created."
      },
      {
        "name": "updated_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the route record was last updated."
      }
    ],
    "notes": [
      "updated_at is maintained automatically on updates."
    ]
  },
  {
    "table": "public.approval_steps",
    "summary": "Audit log of actions performed during payment approval.",
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "nullable": false,
        "pk": true,
        "description": "Primary key of the approval step entry."
      },
      {
        "name": "payment_approval_id",
        "type": "uuid",
        "nullable": false,
        "fk": "public.payment_approvals.id",
        "description": "Payment approval instance (public.payment_approvals.id) this entry belongs to."
      },
      {
        "name": "stage_id",
        "type": "integer",
        "nullable": false,
        "fk": "public.workflow_stages.id",
        "description": "Workflow stage (public.workflow_stages.id) where the action happened."
      },
      {
        "name": "action",
        "type": "text",
        "nullable": false,
        "description": "Recorded action on the stage, e.g. approve or reject."
      },
      {
        "name": "acted_by",
        "type": "uuid",
        "nullable": true,
        "fk": "auth.users.id",
        "description": "User (auth.users.id) who performed the action."
      },
      {
        "name": "acted_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the action was performed."
      },
      {
        "name": "comment",
        "type": "text",
        "nullable": true,
        "description": "Optional free-form note left by the approver."
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the audit entry was stored."
      }
    ]
  },
  {
    "table": "public.attachments",
    "summary": "Metadata for files uploaded to Supabase Storage.",
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "nullable": false,
        "pk": true,
        "description": "Primary key of the attachment and Storage object identifier."
      },
      {
        "name": "original_name",
        "type": "varchar(255)",
        "nullable": false,
        "description": "Original filename provided by the user."
      },
      {
        "name": "storage_path",
        "type": "varchar(500)",
        "nullable": false,
        "description": "Path to the object inside Supabase Storage."
      },
      {
        "name": "size_bytes",
        "type": "integer",
        "nullable": false,
        "description": "File size in bytes."
      },
      {
        "name": "mime_type",
        "type": "varchar(100)",
        "nullable": false,
        "description": "Detected MIME type of the file."
      },
      {
        "name": "created_by",
        "type": "uuid",
        "nullable": false,
        "fk": "auth.users.id",
        "description": "User (auth.users.id) who uploaded the file."
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the attachment record was created."
      },
      {
        "name": "updated_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the attachment metadata was last updated."
      },
      {
        "name": "description",
        "type": "text",
        "nullable": true,
        "description": "User-provided description of the file content"
      }
    ],
    "notes": [
      "updated_at is maintained automatically on updates."
    ]
  },
  {
    "table": "public.contract_attachments",
    "summary": "Связь договоров с приложенными файлами",
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "nullable": false,
        "pk": true
      },
      {
        "name": "contract_id",
        "type": "uuid",
        "nullable": false
      },
      {
        "name": "attachment_id",
        "type": "uuid",
        "nullable": false
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true
      }
    ]
  },
  {
    "table": "public.contract_invoices",
    "summary": "Связь договоров со счетами",
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "nullable": false,
        "pk": true
      },
      {
        "name": "contract_id",
        "type": "uuid",
        "nullable": false
      },
      {
        "name": "invoice_id",
        "type": "uuid",
        "nullable": false
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true
      }
    ]
  },
  {
    "table": "public.contractor_types",
    "summary": "Reference list of contractor categories.",
    "columns": [
      {
        "name": "id",
        "type": "integer",
        "nullable": false,
        "pk": true,
        "description": "Primary key of the contractor type."
      },
      {
        "name": "code",
        "type": "varchar(50)",
        "nullable": false,
        "description": "Unique code used to identify the contractor type."
      },
      {
        "name": "name",
        "type": "varchar(255)",
        "nullable": false,
        "description": "Human readable contractor type name."
      },
      {
        "name": "description",
        "type": "text",
        "nullable": true,
        "description": "Optional explanation of when to use the contractor type."
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the contractor type was created."
      },
      {
        "name": "updated_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the contractor type was last updated."
      }
    ],
    "notes": [
      "updated_at is maintained automatically on updates."
    ]
  },
  {
    "table": "public.contractors",
    "summary": "Registry of contractors linked to invoices and projects.",
    "columns": [
      {
        "name": "id",
        "type": "integer",
        "nullable": false,
        "pk": true,
        "description": "Primary key of the contractor."
      },
      {
        "name": "type_id",
        "type": "integer",
        "nullable": false,
        "fk": "public.contractor_types.id",
        "description": "Contractor type (public.contractor_types.id)."
      },
      {
        "name": "name",
        "type": "varchar(255)",
        "nullable": false,
        "description": "Official contractor name stored for invoices."
      },
      {
        "name": "inn",
        "type": "varchar(12)",
        "nullable": true,
        "description": "Russian tax identifier (INN) of the contractor."
      },
      {
        "name": "created_by",
        "type": "uuid",
        "nullable": true,
        "fk": "auth.users.id",
        "description": "User (auth.users.id) who created the contractor record."
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the contractor record was created."
      },
      {
        "name": "updated_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the contractor record was last updated."
      }
    ],
    "notes": [
      "updated_at is maintained automatically on updates."
    ]
  },
  {
    "table": "public.contracts",
    "summary": "Договоры с контрагентами",
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "nullable": false,
        "pk": true
      },
      {
        "name": "contract_number",
        "type": "varchar(255)",
        "nullable": false,
        "description": "Номер договора"
      },
      {
        "name": "contract_date",
        "type": "date",
        "nullable": false,
        "description": "Дата заключения договора"
      },
      {
        "name": "payer_id",
        "type": "integer",
        "nullable": true,
        "fk": "public.contractors.id",
        "description": "Ссылка на плательщика (public.contractors.id)"
      },
      {
        "name": "supplier_id",
        "type": "integer",
        "nullable": true,
        "fk": "public.contractors.id",
        "description": "Ссылка на поставщика (public.contractors.id)"
      },
      {
        "name": "vat_rate",
        "type": "numeric(5,2)",
        "nullable": true,
        "description": "Ставка НДС в процентах"
      },
      {
        "name": "warranty_period_days",
        "type": "integer",
        "nullable": true,
        "description": "Гарантийный срок в днях"
      },
      {
        "name": "description",
        "type": "text",
        "nullable": true,
        "description": "Описание договора"
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true
      },
      {
        "name": "updated_at",
        "type": "timestamptz",
        "nullable": true
      },
      {
        "name": "created_by",
        "type": "uuid",
        "nullable": true,
        "fk": "auth.users.id",
        "description": "Пользователь, создавший запись (auth.users.id)"
      }
    ],
    "notes": [
      "updated_at is maintained automatically on updates."
    ]
  },
  {
    "table": "public.departments",
    "summary": "Организационные отделы компании",
    "columns": [
      {
        "name": "id",
        "type": "integer",
        "nullable": false,
        "pk": true
      },
      {
        "name": "name",
        "type": "varchar(255)",
        "nullable": false
      },
      {
        "name": "description",
        "type": "text",
        "nullable": true
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true
      },
      {
        "name": "updated_at",
        "type": "timestamptz",
        "nullable": true
      }
    ],
    "notes": [
      "updated_at is maintained automatically on updates."
    ]
  },
  {
    "table": "public.employees",
    "summary": "Справочник сотрудников",
    "columns": [
      {
        "name": "id",
        "type": "integer",
        "nullable": false,
        "pk": true
      },
      {
        "name": "last_name",
        "type": "varchar(255)",
        "nullable": false,
        "description": "Фамилия сотрудника"
      },
      {
        "name": "first_name",
        "type": "varchar(255)",
        "nullable": false,
        "description": "Имя сотрудника"
      },
      {
        "name": "middle_name",
        "type": "varchar(255)",
        "nullable": true,
        "description": "Отчество сотрудника"
      },
      {
        "name": "full_name",
        "type": "varchar(765)",
        "nullable": true,
        "description": "Полное ФИО сотрудника (генерируется автоматически)"
      },
      {
        "name": "department_id",
        "type": "integer",
        "nullable": true,
        "fk": "public.departments.id",
        "description": "Ссылка на отдел (public.departments.id)"
      },
      {
        "name": "position_id",
        "type": "integer",
        "nullable": true,
        "fk": "public.positions.id",
        "description": "Ссылка на должность (public.positions.id)"
      },
      {
        "name": "email",
        "type": "varchar(255)",
        "nullable": true,
        "description": "Рабочий email сотрудника"
      },
      {
        "name": "phone",
        "type": "varchar(50)",
        "nullable": true,
        "description": "Рабочий телефон сотрудника"
      },
      {
        "name": "is_active",
        "type": "boolean",
        "nullable": false,
        "description": "Активен ли сотрудник (false = уволен)"
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true
      },
      {
        "name": "updated_at",
        "type": "timestamptz",
        "nullable": true
      },
      {
        "name": "created_by",
        "type": "uuid",
        "nullable": true,
        "fk": "auth.users.id",
        "description": "Пользователь, создавший запись (auth.users.id)"
      }
    ],
    "notes": [
      "updated_at is maintained automatically on updates."
    ]
  },
  {
    "table": "public.invoice_attachments",
    "summary": "Associates invoices with stored attachments.",
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "nullable": false,
        "pk": true,
        "description": "Primary key of the invoice-attachment relation."
      },
      {
        "name": "invoice_id",
        "type": "uuid",
        "nullable": false,
        "fk": "public.invoices.id",
        "description": "Invoice (public.invoices.id) that the file belongs to."
      },
      {
        "name": "attachment_id",
        "type": "uuid",
        "nullable": false,
        "fk": "public.attachments.id",
        "description": "Attachment (public.attachments.id) linked to the invoice."
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the attachment was linked to the invoice."
      }
    ]
  },
  {
    "table": "public.invoice_payments",
    "summary": "Allocation of payments to invoices.",
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "nullable": false,
        "pk": true,
        "description": "Primary key of the invoice-payment allocation."
      },
      {
        "name": "invoice_id",
        "type": "uuid",
        "nullable": false,
        "fk": "public.invoices.id",
        "description": "Invoice (public.invoices.id) receiving the allocation."
      },
      {
        "name": "payment_id",
        "type": "uuid",
        "nullable": false,
        "fk": "public.payments.id",
        "description": "Payment (public.payments.id) allocated to the invoice."
      },
      {
        "name": "allocated_amount",
        "type": "numeric(15,2)",
        "nullable": false,
        "description": "Portion of the payment applied to the invoice."
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the allocation was recorded."
      }
    ]
  },
  {
    "table": "public.invoice_statuses",
    "summary": "Reference list of invoice workflow statuses.",
    "columns": [
      {
        "name": "id",
        "type": "integer",
        "nullable": false,
        "pk": true,
        "description": "Primary key of the invoice status."
      },
      {
        "name": "code",
        "type": "varchar(50)",
        "nullable": false,
        "description": "Unique status code used in API and UI."
      },
      {
        "name": "name",
        "type": "varchar(255)",
        "nullable": false,
        "description": "Display name of the invoice status."
      },
      {
        "name": "description",
        "type": "text",
        "nullable": true,
        "description": "Optional description clarifying when to use the status."
      },
      {
        "name": "sort_order",
        "type": "integer",
        "nullable": true,
        "description": "Ordering weight used when listing statuses."
      },
      {
        "name": "color",
        "type": "varchar(20)",
        "nullable": true,
        "description": "Optional UI color token or hex code for the status."
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the invoice status was created."
      },
      {
        "name": "updated_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the invoice status was last updated."
      }
    ],
    "notes": [
      "updated_at is maintained automatically on updates."
    ]
  },
  {
    "table": "public.invoice_types",
    "summary": "Reference list of invoice classification types.",
    "columns": [
      {
        "name": "id",
        "type": "integer",
        "nullable": false,
        "pk": true,
        "description": "Primary key of the invoice type."
      },
      {
        "name": "code",
        "type": "varchar(50)",
        "nullable": false,
        "description": "Unique code representing the invoice type."
      },
      {
        "name": "name",
        "type": "varchar(255)",
        "nullable": false,
        "description": "Display name of the invoice type."
      },
      {
        "name": "description",
        "type": "text",
        "nullable": true,
        "description": "Optional explanation of what the invoice type represents."
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the invoice type record was created."
      },
      {
        "name": "updated_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the invoice type record was last updated."
      }
    ],
    "notes": [
      "updated_at is maintained automatically on updates."
    ]
  },
  {
    "table": "public.invoices",
    "summary": "Outbound invoices issued from PayHub.",
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "nullable": false,
        "pk": true,
        "description": "Primary key of the invoice (UUID)."
      },
      {
        "name": "user_id",
        "type": "uuid",
        "nullable": false,
        "description": "Supabase auth user who created or owns the invoice."
      },
      {
        "name": "invoice_number",
        "type": "text",
        "nullable": false,
        "description": "Human readable invoice number shown to customers."
      },
      {
        "name": "description",
        "type": "text",
        "nullable": true,
        "description": "Optional invoice description or customer note."
      },
      {
        "name": "due_date",
        "type": "date",
        "nullable": true,
        "description": "Date by which payment is expected."
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the invoice record was created."
      },
      {
        "name": "updated_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the invoice record was last updated."
      },
      {
        "name": "invoice_date",
        "type": "date",
        "nullable": false,
        "description": "Calendar date printed on the invoice."
      },
      {
        "name": "payer_id",
        "type": "integer",
        "nullable": true,
        "fk": "public.contractors.id",
        "description": "Contractor acting as payer (public.contractors.id)."
      },
      {
        "name": "supplier_id",
        "type": "integer",
        "nullable": true,
        "fk": "public.contractors.id",
        "description": "Contractor acting as supplier (public.contractors.id)."
      },
      {
        "name": "project_id",
        "type": "integer",
        "nullable": true,
        "fk": "public.projects.id",
        "description": "Project associated with the invoice (public.projects.id)."
      },
      {
        "name": "invoice_type_id",
        "type": "integer",
        "nullable": true,
        "fk": "public.invoice_types.id",
        "description": "Invoice type reference (public.invoice_types.id)."
      },
      {
        "name": "amount_with_vat",
        "type": "numeric(15,2)",
        "nullable": true,
        "description": "Invoice total amount including VAT."
      },
      {
        "name": "vat_rate",
        "type": "numeric(5,2)",
        "nullable": true,
        "description": "VAT rate applied to the invoice total, in percent."
      },
      {
        "name": "vat_amount",
        "type": "numeric(15,2)",
        "nullable": true,
        "description": "VAT portion of the invoice total."
      },
      {
        "name": "amount_without_vat",
        "type": "numeric(15,2)",
        "nullable": true,
        "description": "Invoice amount excluding VAT."
      },
      {
        "name": "delivery_days",
        "type": "integer",
        "nullable": true,
        "description": "Number of days required for delivery after payment."
      },
      {
        "name": "delivery_days_type",
        "type": "varchar(20)",
        "nullable": true,
        "description": "Interpretation of delivery days (working or calendar)."
      },
      {
        "name": "preliminary_delivery_date",
        "type": "date",
        "nullable": true,
        "description": "Projected delivery date calculated from payment terms."
      },
      {
        "name": "status_id",
        "type": "integer",
        "nullable": false,
        "fk": "public.invoice_statuses.id",
        "description": "Workflow status of the invoice (public.invoice_statuses.id)."
      },
      {
        "name": "delivery_cost",
        "type": "numeric(12,2)",
        "nullable": true,
        "description": "Стоимость доставки в рублях"
      },
      {
        "name": "relevance_date",
        "type": "timestamptz",
        "nullable": false,
        "description": "Дата актуальности счета. Автоматически устанавливается при создании и может обновляться пользователем"
      },
      {
        "name": "material_request_id",
        "type": "uuid",
        "nullable": true,
        "description": "Ссылка на заявку на материалы"
      }
    ],
    "notes": [
      "VAT totals are recalculated via calculate_vat_on_invoice before persist.",
      "updated_at is maintained automatically on updates."
    ]
  },
  {
    "table": "public.material_classes",
    "summary": "",
    "columns": [
      {
        "name": "id",
        "type": "bigint",
        "nullable": false,
        "pk": true
      },
      {
        "name": "code",
        "type": "text",
        "nullable": false
      },
      {
        "name": "name",
        "type": "text",
        "nullable": false
      },
      {
        "name": "is_active",
        "type": "boolean",
        "nullable": true
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true
      },
      {
        "name": "updated_at",
        "type": "timestamptz",
        "nullable": true
      }
    ]
  },
  {
    "table": "public.material_request_items",
    "summary": "Позиции в заявках на материалы",
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "nullable": false,
        "pk": true,
        "description": "Уникальный идентификатор позиции"
      },
      {
        "name": "material_request_id",
        "type": "uuid",
        "nullable": false,
        "description": "Ссылка на заявку"
      },
      {
        "name": "material_name",
        "type": "varchar(500)",
        "nullable": false,
        "description": "Наименование материала"
      },
      {
        "name": "unit",
        "type": "varchar(50)",
        "nullable": false,
        "description": "Единица измерения (шт, кг, м, м2, м3, л и т.д.)"
      },
      {
        "name": "quantity",
        "type": "numeric(15,3)",
        "nullable": false,
        "description": "Количество"
      },
      {
        "name": "sort_order",
        "type": "integer",
        "nullable": true,
        "description": "Порядок сортировки позиций"
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true
      }
    ]
  },
  {
    "table": "public.material_requests",
    "summary": "Заявки на материалы",
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "nullable": false,
        "pk": true,
        "description": "Уникальный идентификатор заявки"
      },
      {
        "name": "request_number",
        "type": "varchar(255)",
        "nullable": false,
        "description": "Номер заявки"
      },
      {
        "name": "request_date",
        "type": "date",
        "nullable": false,
        "description": "Дата создания заявки"
      },
      {
        "name": "project_id",
        "type": "integer",
        "nullable": true,
        "description": "Ссылка на проект"
      },
      {
        "name": "employee_id",
        "type": "integer",
        "nullable": true,
        "description": "Ответственный сотрудник"
      },
      {
        "name": "total_items",
        "type": "integer",
        "nullable": true,
        "description": "Общее количество позиций в заявке"
      },
      {
        "name": "created_by",
        "type": "uuid",
        "nullable": true,
        "description": "Пользователь, создавший заявку"
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true
      },
      {
        "name": "updated_at",
        "type": "timestamptz",
        "nullable": true
      }
    ]
  },
  {
    "table": "public.payment_approvals",
    "summary": "Payment approval instances.",
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "nullable": false,
        "pk": true,
        "description": "Primary key of the payment approval."
      },
      {
        "name": "payment_id",
        "type": "uuid",
        "nullable": false,
        "fk": "public.payments.id",
        "description": "Payment (public.payments.id) that is being approved."
      },
      {
        "name": "route_id",
        "type": "integer",
        "nullable": false,
        "fk": "public.approval_routes.id",
        "description": "Approval route (public.approval_routes.id) used for the payment."
      },
      {
        "name": "status_id",
        "type": "integer",
        "nullable": false,
        "fk": "public.payment_statuses.id",
        "description": "Current status of the approval (public.payment_statuses.id)."
      },
      {
        "name": "current_stage_index",
        "type": "integer",
        "nullable": false,
        "description": "Zero-based index of the current stage within the route."
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the approval instance was created."
      },
      {
        "name": "updated_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the approval instance was last updated."
      }
    ],
    "notes": [
      "updated_at is maintained automatically on updates."
    ]
  },
  {
    "table": "public.payment_attachments",
    "summary": "Associates payments with stored attachments.",
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "nullable": false,
        "pk": true,
        "description": "Primary key of the payment-attachment relation."
      },
      {
        "name": "payment_id",
        "type": "uuid",
        "nullable": false,
        "fk": "public.payments.id",
        "description": "Payment (public.payments.id) that the file is attached to."
      },
      {
        "name": "attachment_id",
        "type": "uuid",
        "nullable": false,
        "fk": "public.attachments.id",
        "description": "Attachment (public.attachments.id) linked to the payment."
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the attachment was linked to the payment."
      }
    ]
  },
  {
    "table": "public.payment_statuses",
    "summary": "Reference list of payment statuses.",
    "columns": [
      {
        "name": "id",
        "type": "integer",
        "nullable": false,
        "pk": true,
        "description": "Primary key of the payment status."
      },
      {
        "name": "code",
        "type": "varchar(50)",
        "nullable": false,
        "description": "Unique code identifying the payment status."
      },
      {
        "name": "name",
        "type": "varchar(255)",
        "nullable": false,
        "description": "Display name of the payment status."
      },
      {
        "name": "description",
        "type": "text",
        "nullable": true,
        "description": "Optional description of what the payment status means."
      },
      {
        "name": "sort_order",
        "type": "integer",
        "nullable": true,
        "description": "Ordering weight used when listing payment statuses."
      },
      {
        "name": "color",
        "type": "varchar(20)",
        "nullable": true,
        "description": "Optional UI color token or hex code for the payment status."
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the payment status was created."
      },
      {
        "name": "updated_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the payment status was last updated."
      }
    ],
    "notes": [
      "updated_at is maintained automatically on updates."
    ]
  },
  {
    "table": "public.payment_types",
    "summary": "Reference list of payment types (advance, final, etc.).",
    "columns": [
      {
        "name": "id",
        "type": "integer",
        "nullable": false,
        "pk": true,
        "description": "Primary key of the payment type."
      },
      {
        "name": "code",
        "type": "varchar(50)",
        "nullable": false,
        "description": "Unique code used to reference the payment type."
      },
      {
        "name": "name",
        "type": "varchar(255)",
        "nullable": false,
        "description": "Display name of the payment type."
      },
      {
        "name": "description",
        "type": "text",
        "nullable": true,
        "description": "Optional description of how the payment type is used."
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the payment type record was created."
      },
      {
        "name": "updated_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the payment type record was last updated."
      }
    ],
    "notes": [
      "updated_at is maintained automatically on updates."
    ]
  },
  {
    "table": "public.payments",
    "summary": "Payments registered against invoices in PayHub.",
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "nullable": false,
        "pk": true,
        "description": "Primary key of the payment (UUID)."
      },
      {
        "name": "invoice_id",
        "type": "uuid",
        "nullable": false,
        "fk": "public.invoices.id",
        "description": "Invoice (public.invoices.id) that the payment relates to."
      },
      {
        "name": "payment_number",
        "type": "integer",
        "nullable": false,
        "description": "Unique sequential number of the payment."
      },
      {
        "name": "payment_date",
        "type": "date",
        "nullable": false,
        "description": "Date on which the payment was made."
      },
      {
        "name": "amount",
        "type": "numeric(15,2)",
        "nullable": false,
        "description": "Monetary amount of the payment."
      },
      {
        "name": "description",
        "type": "text",
        "nullable": true,
        "description": "Optional description or purpose of the payment."
      },
      {
        "name": "payment_type_id",
        "type": "integer",
        "nullable": true,
        "fk": "public.payment_types.id",
        "description": "Payment type (public.payment_types.id)."
      },
      {
        "name": "status_id",
        "type": "integer",
        "nullable": true,
        "fk": "public.payment_statuses.id",
        "description": "Current payment status (public.payment_statuses.id)."
      },
      {
        "name": "created_by",
        "type": "uuid",
        "nullable": true,
        "fk": "auth.users.id",
        "description": "User (auth.users.id) who created the payment record."
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the payment record was created."
      },
      {
        "name": "updated_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the payment record was last updated."
      }
    ],
    "notes": [
      "updated_at is maintained automatically on updates."
    ]
  },
  {
    "table": "public.positions",
    "summary": "Должности сотрудников",
    "columns": [
      {
        "name": "id",
        "type": "integer",
        "nullable": false,
        "pk": true
      },
      {
        "name": "name",
        "type": "varchar(255)",
        "nullable": false
      },
      {
        "name": "description",
        "type": "text",
        "nullable": true
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true
      },
      {
        "name": "updated_at",
        "type": "timestamptz",
        "nullable": true
      }
    ],
    "notes": [
      "updated_at is maintained automatically on updates."
    ]
  },
  {
    "table": "public.projects",
    "summary": "Projects used to group invoices and contractors.",
    "columns": [
      {
        "name": "id",
        "type": "integer",
        "nullable": false,
        "pk": true,
        "description": "Primary key of the project."
      },
      {
        "name": "code",
        "type": "varchar(50)",
        "nullable": true,
        "description": "Optional unique project code used in integrations and search."
      },
      {
        "name": "name",
        "type": "varchar(255)",
        "nullable": false,
        "description": "Display name of the project."
      },
      {
        "name": "description",
        "type": "text",
        "nullable": true,
        "description": "Optional project description for internal users."
      },
      {
        "name": "is_active",
        "type": "boolean",
        "nullable": true,
        "description": "TRUE when the project is active."
      },
      {
        "name": "created_by",
        "type": "uuid",
        "nullable": true,
        "fk": "auth.users.id",
        "description": "User (auth.users.id) who created the project."
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the project record was created."
      },
      {
        "name": "updated_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the project record was last updated."
      }
    ],
    "notes": [
      "updated_at is maintained automatically on updates."
    ]
  },
  {
    "table": "public.roles",
    "summary": "Roles that define access levels inside PayHub.",
    "columns": [
      {
        "name": "id",
        "type": "integer",
        "nullable": false,
        "pk": true,
        "description": "Primary key of the role."
      },
      {
        "name": "code",
        "type": "varchar(50)",
        "nullable": false,
        "description": "Unique machine-readable code of the role."
      },
      {
        "name": "name",
        "type": "varchar(255)",
        "nullable": false,
        "description": "Display name of the role."
      },
      {
        "name": "description",
        "type": "text",
        "nullable": true,
        "description": "Optional description of the role permissions."
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the role record was created."
      },
      {
        "name": "updated_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the role record was last updated."
      },
      {
        "name": "own_projects_only",
        "type": "boolean",
        "nullable": true,
        "description": "TRUE when the role limits users to their own projects."
      }
    ],
    "notes": [
      "updated_at is maintained automatically on updates."
    ]
  },
  {
    "table": "public.user_profiles",
    "summary": "Mirror of Supabase auth user profiles stored in the public schema.",
    "columns": [
      {
        "name": "id",
        "type": "uuid",
        "nullable": false,
        "pk": true,
        "fk": "auth.users.id",
        "description": "Primary key of the profile and foreign key to auth.users.id."
      },
      {
        "name": "email",
        "type": "text",
        "nullable": false,
        "description": "Primary email address associated with the user profile."
      },
      {
        "name": "full_name",
        "type": "text",
        "nullable": false,
        "description": "Display name of the user."
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the profile record was created."
      },
      {
        "name": "updated_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the profile record was last updated."
      },
      {
        "name": "role_id",
        "type": "integer",
        "nullable": true,
        "fk": "public.roles.id",
        "description": "Role (public.roles.id) assigned to the user."
      }
    ],
    "notes": [
      "updated_at is maintained automatically on updates."
    ]
  },
  {
    "table": "public.user_projects",
    "summary": "Mapping table assigning users to projects for access control.",
    "columns": [
      {
        "name": "id",
        "type": "integer",
        "nullable": false,
        "pk": true,
        "description": "Primary key of the user-project link."
      },
      {
        "name": "user_id",
        "type": "uuid",
        "nullable": false,
        "fk": "auth.users.id",
        "description": "User (auth.users.id) who receives access to the project."
      },
      {
        "name": "project_id",
        "type": "integer",
        "nullable": false,
        "fk": "public.projects.id",
        "description": "Project (public.projects.id) granted to the user."
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the user-project link was created."
      }
    ]
  },
  {
    "table": "public.workflow_stages",
    "summary": "Workflow stages that build approval routes and set payment statuses.",
    "columns": [
      {
        "name": "id",
        "type": "integer",
        "nullable": false,
        "pk": true,
        "description": "Primary key of the workflow stage."
      },
      {
        "name": "route_id",
        "type": "integer",
        "nullable": false,
        "fk": "public.approval_routes.id",
        "description": "Approval route (public.approval_routes.id) the stage belongs to."
      },
      {
        "name": "order_index",
        "type": "integer",
        "nullable": false,
        "description": "Zero-based order of the stage within the route."
      },
      {
        "name": "role_id",
        "type": "integer",
        "nullable": false,
        "fk": "public.roles.id",
        "description": "Role (public.roles.id) responsible for processing the stage."
      },
      {
        "name": "name",
        "type": "varchar(255)",
        "nullable": true,
        "description": "Display name of the workflow stage."
      },
      {
        "name": "created_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the workflow stage was created."
      },
      {
        "name": "updated_at",
        "type": "timestamptz",
        "nullable": true,
        "description": "Timestamp when the workflow stage was last updated."
      },
      {
        "name": "payment_status_id",
        "type": "integer",
        "nullable": true,
        "fk": "public.payment_statuses.id",
        "description": "Payment status (public.payment_statuses.id) applied after the stage is completed."
      },
      {
        "name": "permissions",
        "type": "jsonb",
        "nullable": true,
        "description": "JSON object storing stage-specific permissions like can_edit_invoice, can_add_files, can_edit_amount, etc."
      },
      {
        "name": "is_active",
        "type": "boolean",
        "nullable": true,
        "description": "Soft deletion flag to preserve referential integrity with approval_steps table"
      }
    ],
    "notes": [
      "updated_at is maintained automatically on updates."
    ]
  }
]
