# Repository Guidelines

## Структура проекта и организация модулей
PayHub построен на Vite + React + TypeScript. Основной код хранится в `src/`; страницы располагаются по схеме `src/pages/InvoicesPage.tsx`, а переиспользуемые модули — в тематических подпапках (`src/components/`, `src/hooks/`). Провайдеры подключаются в `src/main.tsx`, держите файл минимальным. Общие ассеты лежат в `src/assets/`, статический контент публикуется через `public/`. SQL-скрипты и метаданные Supabase находятся в `supabase/`; избегайте ручных миграций вне этой папки.

## Сборка, тесты и разработка
`npm run dev` запускает Vite на `http://localhost:5173` для локальной разработки. `npm run build` вызывает `tsc -b` и собирает продакшн-пакет в `dist/`. `npm run preview` проверяет собранный бандл, `npm run lint` прогоняет ESLint по `.ts/.tsx`. После обновления зависимостей не забудьте `npm install`.

## Стиль кода и соглашения об именовании
Используйте функциональные компоненты с PascalCase (`PaymentPanel.tsx`), для хуков и утилит — camelCase (`useInvoices.ts`). Отступ — 2 пробела, строки со строковыми литералами в одинарных кавычках и с завершающими запятыми. Импорты: внешние пакеты, затем абсолютные алиасы, затем относительные пути. ESLint-конфигурация считается источником истины; исправляйте или обосновывайте предупреждения до коммита.

## Руководство по тестированию
Целевая связка — Vitest + React Testing Library. Размещайте тесты рядом с компонентами в формате `Component.test.tsx`. До появления автотестов фиксируйте ручные проверки в описании PR. Для ключевых потоков стремитесь к покрытию ≥80%.

## Коммиты и pull request'ы
Используйте Conventional Commits (`feat:`, `fix:`, `chore:`) и группируйте изменения логически. В PR добавляйте краткое описание, ссылку на задачу и результаты ручного тестирования; при изменении UI прикладывайте скриншоты. Отмечайте риски деплоя и последующие действия, чтобы команда могла планировать работу.

## Безопасность и конфигурация
Секреты храните в `.env` под префиксами `VITE_`; не логируйте Supabase-ключи. Обновления схемы выполняйте через файлы в `supabase/ai_context`, избегая разрозненных SQL-запросов в коде.
